sources:
  - name: jaffle_shop
    database: raw
    schema: jaffle_shop
    config:
      freshness:
        warn_after:
          count: 12
          period: hour
        error_after:
          count: 1
          period: day
      loaded_at_field: _etl_loaded_at
    tables:
      - name: customers
        config:
          freshness: null
      - name: orders
models:
- name: stg_jaffle_shop__customers
  columns:
    - name: customer_id
      data_tests:
        - unique
        - not_null

- name: stg_jaffle_shop__orders
  columns:
    - name: order_id
      data_tests:
        - unique
        - not_null
    - name: order_status
      data_tests:
        - accepted_values:
            values:
              - completed
              - shipped
              - returned
              - placed
              - return_pending
    - name: customer_id
      data_tests:
        - relationships:
            field: customer_id
            to: ref('stg_jaffle_shop__customers')
      


    